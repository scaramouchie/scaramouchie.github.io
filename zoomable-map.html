<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Zoomable Map</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      overflow: hidden;
      height: 100%;
      background-color: #111;
    }
    #drawing {
      width: 100%;
      height: 100%;
      cursor: grab;
    }
  </style>
</head>
<body>
  <div id="drawing"></div>

  <!-- SVG.js core -->
  <script src="https://cdn.jsdelivr.net/npm/@svgdotjs/svg.js@3.2/dist/svg.min.js"></script>
  <!-- SVG.js panzoom plugin -->
  <script src="https://cdn.jsdelivr.net/npm/svg.panzoom.js@2.1.3/dist/svg.panzoom.min.js"></script>

  <script>
    // Load SVG dynamically
    fetch('zoomable-map.svg')
      .then(res => res.text())
      .then(svgText => {
        const draw = SVG().addTo('#drawing').size('100%', '100%');
        const svgFragment = SVG(svgText);
        draw.add(svgFragment);

        // Set a large virtual viewBox for precision zooming
        draw.viewbox(0, 0, 15000, 15000);

        // Enable panzoom
        const panZoom = draw.panZoom({
          zoomMin: 0.000033,  // ~0.5 / 15000
          zoomMax: 30000,     // allows deep zoom in
          zoomFactor: 0.2,
          panMouseButton: 2   // right click
        });

        // Prevent context menu so right-click can be used for panning
        window.addEventListener('contextmenu', e => e.preventDefault());

        // Enable scroll zooming (mouse wheel)
        draw.on('wheel', function (event) {
          event.preventDefault();
          const { offsetX, offsetY, deltaY } = event;
          const zoomAmount = deltaY > 0 ? 0.9 : 1.1;
          panZoom.zoom(zoomAmount, { x: offsetX, y: offsetY });
        });
      });
  </script>
</body>
</html>
